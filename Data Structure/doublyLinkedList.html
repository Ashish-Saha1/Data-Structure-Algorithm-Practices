<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    

    <script>

        class Node{
            constructor(value){
                this.value = value;
                this.previous = null;
                this.next = null;
            }
        }

        // let newNode = new Node (10);
        //     newNode.next = new Node(20);
        //     newNode.next.next = new Node(30);
        //     newNode.previous = new Node(5);
        //     console.log(newNode)

       
        

        class DoublyLinkList{
            constructor(){
                this.head = null;
                this.tail = null;
                this.length = 0;
                
            }

            push(value){

                let newNode = new Node (value)

                if(this.length === 0){
                    this.head = newNode;
                    this.tail = newNode;
        

                }else{
                    //my implemention but it was wrong
                    // let prev = this.tail;
                    // this.tail.next = newNode;
                    // this.tail = newNode;
                    // this.tail.previous = prev.value;

                    this.tail.next = newNode;
                    newNode.previous = this.tail;
                    this.tail = newNode;
                   
                }

                
                this.length++;

            }

          


            pop(){
                if(!this.head){
                    return null;

                }

                if(this.length === 1){
                    this.head = null;
                    this.tail = null;
                    this.length = 0;
                }

                else{
                    this.tail = this.tail.previous;
                    this.tail.next = null;

                    //below line is not necessary as my opinion
                    //this.tail.previous = null;

                    this.length--;
                }

            }


            shift(){
                if(!this.head){
                    return null
                }
                // just show which node is shifted
                let oldHead = this.head

                if(this.length === 1){
                    this.head = null;
                    this.tail = null;
                   
                }else{
                

                this.head = this.head.next;
                this.head.previous = null;
                
               
               
                }

                this.length--;
                // just show which node is shifted
                return oldHead;
            }

            unshift(value){
                let newNode = {
                    value: value,
                    next: null,
                    previous: null
                }

                if(!this.head){
                    this.head = newNode;
                    this.tail = newNode;
                    
                }
                else{
                    //implemented my me
                    // let oldHead = this.head;
                    // this.head = newNode;
                    // this.head.next = oldHead;
                    // oldHead.previous = newNode;
               

                this.head.previous = newNode;
                newNode.next = this.head;
                this.head = newNode;
              
                }
                

                this.length++;
            }

           showList(){

                let arr = [];
                let startNode = this.head;

                
                while(startNode){
                    arr.push(startNode.value);
                    startNode = startNode.next;
                }

                return arr;
           }

        }

        let doubleLink = new DoublyLinkList()

        doubleLink.push(10);
        doubleLink.push(20);
        // console.log(doubleLink.shift())
        // console.log(doubleLink.shift())

        doubleLink.unshift(1)
        doubleLink.unshift(2)
        doubleLink.unshift(3)
        doubleLink.pop()
        doubleLink.push(30)
        

        console.log(doubleLink.showList())
        console.log(doubleLink)
        



        






    </script>
</body>
</html>